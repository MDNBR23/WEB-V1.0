<!doctype html><html lang="es"><head>
<meta charset="utf-8">
<script>(function(){var t=localStorage.getItem('theme')||'light';document.documentElement.setAttribute('data-theme',t);})();</script>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#475569">
<title>Verificación de Email - Med Tools Hub</title>
<link rel="icon" type="image/png" href="favicon.png">
<link rel="stylesheet" href="style.css">
<script>
  document.documentElement.classList.add('preload');
  window.addEventListener('DOMContentLoaded', function(){
    document.body.classList.add('loaded');
    document.documentElement.classList.remove('preload');
  });
</script>
</head><body>
  <div class="auth-wrapper">
    <div class="auth-box glass">
      <h2 class="auth-title" id="title">Verificando tu correo electrónico...</h2>
      <div id="content" class="stack" style="text-align:center;">
        <div style="margin:30px 0;">
          <div class="spinner"></div>
        </div>
        <p class="text-muted">Por favor espera mientras verificamos tu correo electrónico.</p>
      </div>
    </div>
  </div>
  <footer class="app-footer">
    <div class="footer-links">
      <a href="privacidad.html">Política de Privacidad</a>
      <span class="separator">|</span>
      <a href="terminos.html">Términos y Condiciones</a>
      <span class="separator">|</span>
      <a href="aviso-legal.html">Aviso Legal</a>
      <span class="separator">|</span>
      <a href="cookies.html">Cookies</a>
    </div>
    <p class="trademark">NBR® 2025 | Med Tools Hub</p>
    <p class="contact">contacto@medtoolshub.cloud</p>
  </footer>
  <script>
    async function verifyEmail() {
      const urlParams = new URLSearchParams(window.location.search);
      const token = urlParams.get('token');
      const titleEl = document.getElementById('title');
      const contentEl = document.getElementById('content');
      
      if (!token) {
        titleEl.textContent = 'Token inválido';
        contentEl.innerHTML = `
          <div style="margin:30px 0;">
            <div style="font-size:64px;">❌</div>
          </div>
          <p style="color:#d32f2f;font-size:16px;margin-bottom:20px;">No se proporcionó un token de verificación válido.</p>
          <a href="index.html" class="btn">Volver al inicio</a>
        `;
        return;
      }
      
      try {
        const response = await fetch('/api/verify-email?token=' + encodeURIComponent(token));
        const data = await response.json();
        
        if (data.success) {
          titleEl.textContent = '✓ ¡Correo verificado exitosamente!';
          titleEl.style.color = '#008B8B';
          contentEl.innerHTML = `
            <div style="margin:30px 0;">
              <div style="font-size:64px;">✅</div>
            </div>
            <p style="font-size:16px;margin-bottom:10px;">${data.message}</p>
            ${data.alreadyVerified ? '' : '<p class="text-muted" style="margin-bottom:20px;">Recibirás un correo electrónico cuando un administrador apruebe tu cuenta.</p>'}
            <div class="auth-actions">
              <a href="index.html" class="btn grow">Ir a la página de inicio</a>
            </div>
          `;
        } else {
          titleEl.textContent = 'Error en la verificación';
          titleEl.style.color = '#d32f2f';
          contentEl.innerHTML = `
            <div style="margin:30px 0;">
              <div style="font-size:64px;">❌</div>
            </div>
            <p style="color:#d32f2f;font-size:16px;margin-bottom:20px;">${data.error || 'No se pudo verificar tu correo electrónico.'}</p>
            <div class="auth-actions">
              <a href="index.html" class="btn secondary">Volver al inicio</a>
            </div>
          `;
        }
      } catch (error) {
        console.error('Error verifying email:', error);
        titleEl.textContent = 'Error del servidor';
        titleEl.style.color = '#d32f2f';
        contentEl.innerHTML = `
          <div style="margin:30px 0;">
            <div style="font-size:64px;">⚠️</div>
          </div>
          <p style="color:#d32f2f;font-size:16px;margin-bottom:20px;">Hubo un error al verificar tu correo. Por favor intenta más tarde.</p>
          <div class="auth-actions">
            <a href="index.html" class="btn secondary">Volver al inicio</a>
          </div>
        `;
      }
    }
    
    verifyEmail();
  </script>
</body></html>